2022-01-11 00:00:54.716 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 00:00:54.761 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 00:00:54.762 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 00:00:54.762 +01:00 [INF] Hosting environment: Development
2022-01-11 00:00:54.762 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 00:00:55.805 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 00:00:55.931 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 127.5506ms
2022-01-11 00:00:56.105 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 00:00:56.194 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 88.7890ms
2022-01-11 00:01:15.169 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/movie/1 - -
2022-01-11 00:01:15.197 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 00:01:15.229 +01:00 [INF] Route matched with {action = "GetAllByMovieId", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.RatingVm]] GetAllByMovieId(Int32) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 00:01:15.494 +01:00 [INF] Rating GetAllByMovieId called.
2022-01-11 00:01:16.044 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:01:16.596 +01:00 [INF] Executed DbCommand (40ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Description], [r].[Id], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2022-01-11 00:01:16.633 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.RatingVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 00:01:16.648 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi) in 1411.6269ms
2022-01-11 00:01:16.650 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 00:01:16.656 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/movie/1 - - - 200 - application/json;+charset=utf-8 1487.0361ms
2022-01-11 00:01:26.852 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie - -
2022-01-11 00:01:26.856 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:01:26.864 +01:00 [INF] Route matched with {action = "GetAll", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.MovieRowVm]] GetAll(MovieApi.Filters.GenericQueryOption`1[MovieApi.Filters.MovieFilter]) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 00:01:26.872 +01:00 [INF] Movie GetAll called.
2022-01-11 00:01:26.898 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:01:26.968 +01:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Length], [m].[Name], (
    SELECT AVG(CAST([r].[Value] AS float))
    FROM [Rating] AS [r]
    WHERE [m].[Id] = [r].[MovieId]) AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
ORDER BY (
    SELECT AVG(CAST([r0].[Value] AS float))
    FROM [Rating] AS [r0]
    WHERE [m].[Id] = [r0].[MovieId]) DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-01-11 00:01:26.975 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.MovieRowVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 00:01:26.980 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.GetAll (MovieApi) in 112.7852ms
2022-01-11 00:01:26.983 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:01:26.987 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie - - - 200 - application/json;+charset=utf-8 134.7225ms
2022-01-11 00:01:40.329 +01:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Rating application/json 47
2022-01-11 00:01:40.335 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.Post (MovieApi)'
2022-01-11 00:01:40.339 +01:00 [INF] Route matched with {action = "Post", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(MovieApi.Dtos.NewRatingDto) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 00:01:40.354 +01:00 [INF] Rating Post called.
2022-01-11 00:01:40.370 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:01:40.399 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Length], [m].[Name], [m].[Year]
FROM [Movie] AS [m]
WHERE [m].[Id] = @__p_0
2022-01-11 00:01:40.544 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 1000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Rating] ([Description], [MovieId], [Value])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [Rating]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-01-11 00:01:40.583 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MovieApi.ViewModels.RatingVm'.
2022-01-11 00:01:40.614 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.Post (MovieApi) in 272.7876ms
2022-01-11 00:01:40.616 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.Post (MovieApi)'
2022-01-11 00:01:40.618 +01:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Rating application/json 47 - 201 - application/json;+charset=utf-8 288.6049ms
2022-01-11 00:01:54.733 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Rating/8 application/json 46
2022-01-11 00:01:54.738 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.Put (MovieApi)'
2022-01-11 00:01:54.742 +01:00 [INF] Route matched with {action = "Put", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, MovieApi.Dtos.UpdateRatingDto) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 00:01:54.746 +01:00 [INF] Rating Put called.
2022-01-11 00:01:54.752 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:01:54.763 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
WHERE [r].[Id] = @__p_0
2022-01-11 00:01:54.855 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.Put (MovieApi) in 111.1209ms
2022-01-11 00:01:54.857 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.Put (MovieApi)'
2022-01-11 00:01:54.860 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The instance of entity type 'Rating' cannot be tracked because another instance with the same key value for {'Id'} is already being tracked. When attaching existing entities, ensure that only one entity instance with a given key value is attached. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see the conflicting key values.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.ThrowIdentityConflict(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry, Boolean updateDuplicate)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(TKey key, InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.IdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.ChangeTracking.EntityEntry.set_State(EntityState value)
   at MovieApi.Services.RatingService.UpdateRating(Int32 id, UpdateRatingDto r) in C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi\Services\RatingService.cs:line 76
   at MovieApi.Controllers.RatingController.Put(Int32 id, UpdateRatingDto r) in C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi\Controllers\RatingController.cs:line 69
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-01-11 00:01:54.926 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/Rating/8 application/json 46 - 500 - text/plain 192.9228ms
2022-01-11 00:03:07.102 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 00:03:07.138 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 00:03:07.138 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 00:03:07.138 +01:00 [INF] Hosting environment: Development
2022-01-11 00:03:07.138 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 00:03:08.227 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 00:03:08.350 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 124.7131ms
2022-01-11 00:03:08.524 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 00:03:08.608 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 83.0899ms
2022-01-11 00:03:14.405 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie/6 - -
2022-01-11 00:03:14.436 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.Get (MovieApi)'
2022-01-11 00:03:14.464 +01:00 [INF] Route matched with {action = "Get", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 00:03:14.723 +01:00 [INF] Movie Get called.
2022-01-11 00:03:15.272 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:03:15.871 +01:00 [INF] Executed DbCommand (51ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Description], [m].[Id], [m].[Length], [m].[Name], (
    SELECT AVG(CAST([r].[Value] AS float))
    FROM [Rating] AS [r]
    WHERE [m].[Id] = [r].[MovieId]) AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
WHERE [m].[Id] = @__id_0
2022-01-11 00:03:15.915 +01:00 [INF] Executing OkObjectResult, writing value of type 'MovieApi.ViewModels.MovieVm'.
2022-01-11 00:03:15.935 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.Get (MovieApi) in 1460.6574ms
2022-01-11 00:03:15.936 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.Get (MovieApi)'
2022-01-11 00:03:15.941 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie/6 - - - 200 - application/json;+charset=utf-8 1536.5856ms
2022-01-11 00:03:29.550 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Rating/6 application/json 46
2022-01-11 00:03:29.554 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.Put (MovieApi)'
2022-01-11 00:03:29.558 +01:00 [INF] Route matched with {action = "Put", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, MovieApi.Dtos.UpdateRatingDto) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 00:03:29.571 +01:00 [INF] Rating Put called.
2022-01-11 00:03:29.604 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:03:29.636 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
WHERE [r].[Id] = @__p_0
2022-01-11 00:04:24.705 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 00:04:24.744 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 00:04:24.745 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 00:04:24.745 +01:00 [INF] Hosting environment: Development
2022-01-11 00:04:24.745 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 00:04:25.838 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 00:04:25.962 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 125.7628ms
2022-01-11 00:04:26.136 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 00:04:26.219 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 82.4352ms
2022-01-11 00:04:38.315 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie/6 - -
2022-01-11 00:04:38.347 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.Get (MovieApi)'
2022-01-11 00:04:38.376 +01:00 [INF] Route matched with {action = "Get", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 00:04:38.643 +01:00 [INF] Movie Get called.
2022-01-11 00:04:39.195 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:04:39.790 +01:00 [INF] Executed DbCommand (43ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Description], [m].[Id], [m].[Length], [m].[Name], (
    SELECT AVG(CAST([r].[Value] AS float))
    FROM [Rating] AS [r]
    WHERE [m].[Id] = [r].[MovieId]) AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
WHERE [m].[Id] = @__id_0
2022-01-11 00:04:39.825 +01:00 [INF] Executing OkObjectResult, writing value of type 'MovieApi.ViewModels.MovieVm'.
2022-01-11 00:04:39.840 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.Get (MovieApi) in 1457.5175ms
2022-01-11 00:04:39.842 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.Get (MovieApi)'
2022-01-11 00:04:39.849 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie/6 - - - 200 - application/json;+charset=utf-8 1534.1583ms
2022-01-11 00:04:55.002 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Rating/6 application/json 46
2022-01-11 00:04:55.007 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.Put (MovieApi)'
2022-01-11 00:04:55.012 +01:00 [INF] Route matched with {action = "Put", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, MovieApi.Dtos.UpdateRatingDto) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 00:04:55.028 +01:00 [INF] Rating Put called.
2022-01-11 00:04:55.059 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:04:55.091 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
WHERE [r].[Id] = @__p_0
2022-01-11 00:05:23.773 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 00:05:23.808 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 00:05:23.808 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 00:05:23.809 +01:00 [INF] Hosting environment: Development
2022-01-11 00:05:23.809 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 00:05:25.002 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 00:05:25.131 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 131.0579ms
2022-01-11 00:05:25.312 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 00:05:25.395 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 83.0402ms
2022-01-11 00:05:49.997 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie/6 - -
2022-01-11 00:05:50.024 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.Get (MovieApi)'
2022-01-11 00:05:50.052 +01:00 [INF] Route matched with {action = "Get", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 00:05:50.313 +01:00 [INF] Movie Get called.
2022-01-11 00:05:50.860 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:05:51.440 +01:00 [INF] Executed DbCommand (40ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Description], [m].[Id], [m].[Length], [m].[Name], (
    SELECT AVG(CAST([r].[Value] AS float))
    FROM [Rating] AS [r]
    WHERE [m].[Id] = [r].[MovieId]) AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
WHERE [m].[Id] = @__id_0
2022-01-11 00:05:51.478 +01:00 [INF] Executing OkObjectResult, writing value of type 'MovieApi.ViewModels.MovieVm'.
2022-01-11 00:05:51.492 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.Get (MovieApi) in 1433.8016ms
2022-01-11 00:05:51.494 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.Get (MovieApi)'
2022-01-11 00:05:51.499 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie/6 - - - 200 - application/json;+charset=utf-8 1503.0235ms
2022-01-11 00:05:59.904 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Rating/6 application/json 46
2022-01-11 00:05:59.908 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.Put (MovieApi)'
2022-01-11 00:05:59.913 +01:00 [INF] Route matched with {action = "Put", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, MovieApi.Dtos.UpdateRatingDto) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 00:05:59.929 +01:00 [INF] Rating Put called.
2022-01-11 00:05:59.960 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:05:59.993 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
WHERE [r].[Id] = @__p_0
2022-01-11 00:08:50.256 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 00:08:50.307 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 00:08:50.308 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 00:08:50.308 +01:00 [INF] Hosting environment: Development
2022-01-11 00:08:50.308 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 00:08:51.216 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 00:08:51.336 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 121.6481ms
2022-01-11 00:08:51.505 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 00:08:51.593 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 88.0018ms
2022-01-11 00:09:16.858 +01:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Movie application/json 65
2022-01-11 00:09:16.893 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.Post (MovieApi)'
2022-01-11 00:09:16.924 +01:00 [INF] Route matched with {action = "Post", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(MovieApi.Dtos.NewMovieDto) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 00:09:17.192 +01:00 [INF] Movie Post called.
2022-01-11 00:09:17.751 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:09:18.193 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 250), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Movie] ([Description], [Length], [Name], [Year])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [Movie]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-01-11 00:09:18.258 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MovieApi.ViewModels.MovieVm'.
2022-01-11 00:09:18.300 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.Post (MovieApi) in 1369.6624ms
2022-01-11 00:09:18.302 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.Post (MovieApi)'
2022-01-11 00:09:18.308 +01:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Movie application/json 65 - 201 - application/json;+charset=utf-8 1450.3047ms
2022-01-11 00:09:49.251 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Movie/7 application/json 65
2022-01-11 00:09:49.258 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.Put (MovieApi)'
2022-01-11 00:09:49.265 +01:00 [INF] Route matched with {action = "Put", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, MovieApi.Dtos.UpdateMovieDto) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 00:09:49.275 +01:00 [INF] Movie Put called.
2022-01-11 00:09:49.301 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:09:49.312 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 250), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Movie] SET [Description] = @p0, [Length] = @p1, [Name] = @p2, [Year] = @p3
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;
2022-01-11 00:09:49.324 +01:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 204
2022-01-11 00:09:49.325 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.Put (MovieApi) in 58.1282ms
2022-01-11 00:09:49.327 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.Put (MovieApi)'
2022-01-11 00:09:49.329 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/Movie/7 application/json 65 - 204 - - 77.1904ms
2022-01-11 00:11:39.164 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 00:11:39.203 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 00:11:39.204 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 00:11:39.204 +01:00 [INF] Hosting environment: Development
2022-01-11 00:11:39.204 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 00:11:40.235 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 00:11:40.362 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 130.2454ms
2022-01-11 00:11:40.533 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 00:11:40.622 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 88.9386ms
2022-01-11 00:11:44.353 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie/6 - -
2022-01-11 00:11:44.384 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.Get (MovieApi)'
2022-01-11 00:11:44.411 +01:00 [INF] Route matched with {action = "Get", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 00:11:44.669 +01:00 [INF] Movie Get called.
2022-01-11 00:11:45.223 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:11:45.825 +01:00 [INF] Executed DbCommand (44ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Description], [m].[Id], [m].[Length], [m].[Name], (
    SELECT AVG(CAST([r].[Value] AS float))
    FROM [Rating] AS [r]
    WHERE [m].[Id] = [r].[MovieId]) AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
WHERE [m].[Id] = @__id_0
2022-01-11 00:11:45.863 +01:00 [INF] Executing OkObjectResult, writing value of type 'MovieApi.ViewModels.MovieVm'.
2022-01-11 00:11:45.878 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.Get (MovieApi) in 1461.3057ms
2022-01-11 00:11:45.880 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.Get (MovieApi)'
2022-01-11 00:11:45.885 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie/6 - - - 200 - application/json;+charset=utf-8 1532.8227ms
2022-01-11 00:11:51.503 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie - -
2022-01-11 00:11:51.507 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:11:51.514 +01:00 [INF] Route matched with {action = "GetAll", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.MovieRowVm]] GetAll(MovieApi.Filters.GenericQueryOption`1[MovieApi.Filters.MovieFilter]) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 00:11:51.525 +01:00 [INF] Movie GetAll called.
2022-01-11 00:11:51.549 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:11:51.572 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Length], [m].[Name], (
    SELECT AVG(CAST([r].[Value] AS float))
    FROM [Rating] AS [r]
    WHERE [m].[Id] = [r].[MovieId]) AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
ORDER BY (
    SELECT AVG(CAST([r0].[Value] AS float))
    FROM [Rating] AS [r0]
    WHERE [m].[Id] = [r0].[MovieId]) DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-01-11 00:11:51.607 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MovieApi.Models.MovieContext'.
System.InvalidOperationException: Nullable object must have a value.
   at lambda_method48(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Nullable object must have a value.
   at lambda_method48(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2022-01-11 00:11:51.688 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.GetAll (MovieApi) in 168.6095ms
2022-01-11 00:11:51.690 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:11:51.694 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Nullable object must have a value.
   at lambda_method48(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MovieApi.Services.MovieService.GetAll(GenericQueryOption`1 option) in C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi\Services\MovieService.cs:line 64
   at MovieApi.Controllers.MovieController.GetAll(GenericQueryOption`1 option) in C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi\Controllers\MovieController.cs:line 51
   at lambda_method42(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-01-11 00:11:51.739 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie - - - 500 - text/plain 236.3346ms
2022-01-11 00:12:58.242 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie?Filter.NameTerm=Star - -
2022-01-11 00:12:58.245 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:12:58.245 +01:00 [INF] Route matched with {action = "GetAll", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.MovieRowVm]] GetAll(MovieApi.Filters.GenericQueryOption`1[MovieApi.Filters.MovieFilter]) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 00:12:58.257 +01:00 [INF] Movie GetAll called.
2022-01-11 00:12:58.267 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:12:58.285 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__option_Filter_NameTerm_0='?' (Size = 250), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Length], [m].[Name], (
    SELECT AVG(CAST([r].[Value] AS float))
    FROM [Rating] AS [r]
    WHERE [m].[Id] = [r].[MovieId]) AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
WHERE (@__option_Filter_NameTerm_0 LIKE N'') OR (CHARINDEX(@__option_Filter_NameTerm_0, [m].[Name]) > 0)
ORDER BY (
    SELECT AVG(CAST([r0].[Value] AS float))
    FROM [Rating] AS [r0]
    WHERE [m].[Id] = [r0].[MovieId]) DESC
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2022-01-11 00:12:58.290 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.MovieRowVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 00:12:58.293 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.GetAll (MovieApi) in 41.26ms
2022-01-11 00:12:58.295 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:12:58.296 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie?Filter.NameTerm=Star - - - 200 - application/json;+charset=utf-8 54.5327ms
2022-01-11 00:13:03.712 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie - -
2022-01-11 00:13:03.716 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:13:03.718 +01:00 [INF] Route matched with {action = "GetAll", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.MovieRowVm]] GetAll(MovieApi.Filters.GenericQueryOption`1[MovieApi.Filters.MovieFilter]) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 00:13:03.723 +01:00 [INF] Movie GetAll called.
2022-01-11 00:13:03.724 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:13:03.733 +01:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Length], [m].[Name], (
    SELECT AVG(CAST([r].[Value] AS float))
    FROM [Rating] AS [r]
    WHERE [m].[Id] = [r].[MovieId]) AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
ORDER BY (
    SELECT AVG(CAST([r0].[Value] AS float))
    FROM [Rating] AS [r0]
    WHERE [m].[Id] = [r0].[MovieId]) DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-01-11 00:13:03.739 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MovieApi.Models.MovieContext'.
System.InvalidOperationException: Nullable object must have a value.
   at lambda_method48(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Nullable object must have a value.
   at lambda_method48(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2022-01-11 00:13:03.798 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.GetAll (MovieApi) in 75.8585ms
2022-01-11 00:13:03.803 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:13:03.806 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Nullable object must have a value.
   at lambda_method48(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MovieApi.Services.MovieService.GetAll(GenericQueryOption`1 option) in C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi\Services\MovieService.cs:line 64
   at MovieApi.Controllers.MovieController.GetAll(GenericQueryOption`1 option) in C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi\Controllers\MovieController.cs:line 51
   at lambda_method42(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-01-11 00:13:03.828 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie - - - 500 - text/plain 115.5908ms
2022-01-11 00:13:26.573 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 00:13:26.615 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 00:13:26.615 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 00:13:26.615 +01:00 [INF] Hosting environment: Development
2022-01-11 00:13:26.615 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 00:13:27.462 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 00:13:27.586 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 126.0594ms
2022-01-11 00:13:27.757 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 00:13:27.847 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 90.4614ms
2022-01-11 00:13:31.003 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie - -
2022-01-11 00:13:31.035 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:13:31.062 +01:00 [INF] Route matched with {action = "GetAll", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.MovieRowVm]] GetAll(MovieApi.Filters.GenericQueryOption`1[MovieApi.Filters.MovieFilter]) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 00:13:31.329 +01:00 [INF] Movie GetAll called.
2022-01-11 00:13:31.895 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:13:32.478 +01:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Length], [m].[Name], (
    SELECT AVG(CAST([r].[Value] AS float))
    FROM [Rating] AS [r]
    WHERE [m].[Id] = [r].[MovieId]) AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
ORDER BY (
    SELECT AVG(CAST([r0].[Value] AS float))
    FROM [Rating] AS [r0]
    WHERE [m].[Id] = [r0].[MovieId]) DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-01-11 00:13:32.525 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MovieApi.Models.MovieContext'.
System.InvalidOperationException: Nullable object must have a value.
   at lambda_method38(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Nullable object must have a value.
   at lambda_method38(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2022-01-11 00:13:32.625 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.GetAll (MovieApi) in 1554.0074ms
2022-01-11 00:13:32.627 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:13:32.633 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Nullable object must have a value.
   at lambda_method38(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MovieApi.Services.MovieService.GetAll(GenericQueryOption`1 option) in C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi\Services\MovieService.cs:line 64
   at MovieApi.Controllers.MovieController.GetAll(GenericQueryOption`1 option) in C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi\Controllers\MovieController.cs:line 51
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-01-11 00:13:32.676 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie - - - 500 - text/plain 1672.8083ms
2022-01-11 00:13:59.962 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 00:13:59.995 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 00:13:59.995 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 00:13:59.995 +01:00 [INF] Hosting environment: Development
2022-01-11 00:13:59.996 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 00:14:01.225 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 00:14:01.350 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 127.1827ms
2022-01-11 00:14:01.523 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 00:14:01.617 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 93.7041ms
2022-01-11 00:14:06.884 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie - -
2022-01-11 00:14:06.912 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:14:06.941 +01:00 [INF] Route matched with {action = "GetAll", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.MovieRowVm]] GetAll(MovieApi.Filters.GenericQueryOption`1[MovieApi.Filters.MovieFilter]) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 00:14:07.210 +01:00 [INF] Movie GetAll called.
2022-01-11 00:14:07.757 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:14:08.341 +01:00 [INF] Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Length], [m].[Name], (
    SELECT AVG(CAST([r].[Value] AS float))
    FROM [Rating] AS [r]
    WHERE [m].[Id] = [r].[MovieId]) AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
ORDER BY (
    SELECT AVG(CAST([r0].[Value] AS float))
    FROM [Rating] AS [r0]
    WHERE [m].[Id] = [r0].[MovieId]) DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-01-11 00:14:08.392 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MovieApi.Models.MovieContext'.
System.InvalidOperationException: Nullable object must have a value.
   at lambda_method38(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Nullable object must have a value.
   at lambda_method38(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2022-01-11 00:14:08.492 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.GetAll (MovieApi) in 1544.2428ms
2022-01-11 00:14:08.494 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:14:08.499 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Nullable object must have a value.
   at lambda_method38(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MovieApi.Services.MovieService.GetAll(GenericQueryOption`1 option) in C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi\Services\MovieService.cs:line 64
   at MovieApi.Controllers.MovieController.GetAll(GenericQueryOption`1 option) in C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi\Controllers\MovieController.cs:line 51
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-01-11 00:14:08.547 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie - - - 500 - text/plain 1662.7811ms
2022-01-11 00:16:38.516 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:5001/api/Movie/7 - -
2022-01-11 00:16:38.519 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.Delete (MovieApi)'
2022-01-11 00:16:38.525 +01:00 [INF] Route matched with {action = "Delete", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 00:16:38.531 +01:00 [INF] Movie Delete called.
2022-01-11 00:16:38.558 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:16:38.590 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Length], [m].[Name], [m].[Year]
FROM [Movie] AS [m]
WHERE [m].[Id] = @__p_0
2022-01-11 00:16:38.706 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Movie]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-01-11 00:16:38.734 +01:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 204
2022-01-11 00:16:38.735 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.Delete (MovieApi) in 205.9386ms
2022-01-11 00:16:38.736 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.Delete (MovieApi)'
2022-01-11 00:16:38.737 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:5001/api/Movie/7 - - - 204 - - 220.7063ms
2022-01-11 00:16:42.834 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie - -
2022-01-11 00:16:42.836 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:16:42.838 +01:00 [INF] Route matched with {action = "GetAll", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.MovieRowVm]] GetAll(MovieApi.Filters.GenericQueryOption`1[MovieApi.Filters.MovieFilter]) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 00:16:42.842 +01:00 [INF] Movie GetAll called.
2022-01-11 00:16:42.849 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:16:42.858 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Length], [m].[Name], (
    SELECT AVG(CAST([r].[Value] AS float))
    FROM [Rating] AS [r]
    WHERE [m].[Id] = [r].[MovieId]) AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
ORDER BY (
    SELECT AVG(CAST([r0].[Value] AS float))
    FROM [Rating] AS [r0]
    WHERE [m].[Id] = [r0].[MovieId]) DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-01-11 00:16:42.871 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.MovieRowVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 00:16:42.883 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.GetAll (MovieApi) in 43.3463ms
2022-01-11 00:16:42.885 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:16:42.886 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie - - - 200 - application/json;+charset=utf-8 51.9845ms
2022-01-11 00:17:24.084 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 00:17:24.115 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 00:17:24.116 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 00:17:24.116 +01:00 [INF] Hosting environment: Development
2022-01-11 00:17:24.116 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 00:17:25.326 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 00:17:25.452 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 128.8302ms
2022-01-11 00:17:25.622 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 00:17:25.714 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 91.7254ms
2022-01-11 00:17:29.556 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie - -
2022-01-11 00:17:29.589 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:17:29.619 +01:00 [INF] Route matched with {action = "GetAll", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.MovieRowVm]] GetAll(MovieApi.Filters.GenericQueryOption`1[MovieApi.Filters.MovieFilter]) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 00:17:29.880 +01:00 [INF] Movie GetAll called.
2022-01-11 00:17:30.417 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:17:31.002 +01:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Length], [m].[Name], (
    SELECT AVG(CAST([r].[Value] AS float))
    FROM [Rating] AS [r]
    WHERE [m].[Id] = [r].[MovieId]) AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
ORDER BY (
    SELECT AVG(CAST([r0].[Value] AS float))
    FROM [Rating] AS [r0]
    WHERE [m].[Id] = [r0].[MovieId]) DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-01-11 00:17:31.047 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.MovieRowVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 00:17:31.070 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.GetAll (MovieApi) in 1442.9131ms
2022-01-11 00:17:31.072 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:17:31.078 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie - - - 200 - application/json;+charset=utf-8 1522.1755ms
2022-01-11 00:17:43.594 +01:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Movie application/json 64
2022-01-11 00:17:43.599 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.Post (MovieApi)'
2022-01-11 00:17:43.603 +01:00 [INF] Route matched with {action = "Post", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(MovieApi.Dtos.NewMovieDto) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 00:17:43.619 +01:00 [INF] Movie Post called.
2022-01-11 00:17:43.650 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:17:43.770 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 250), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Movie] ([Description], [Length], [Name], [Year])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [Movie]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-01-11 00:17:43.812 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MovieApi.ViewModels.MovieVm'.
2022-01-11 00:17:43.843 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.Post (MovieApi) in 237.7919ms
2022-01-11 00:17:43.847 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.Post (MovieApi)'
2022-01-11 00:17:43.848 +01:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Movie application/json 64 - 201 - application/json;+charset=utf-8 254.6357ms
2022-01-11 00:17:50.929 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie - -
2022-01-11 00:17:50.932 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:17:50.933 +01:00 [INF] Route matched with {action = "GetAll", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.MovieRowVm]] GetAll(MovieApi.Filters.GenericQueryOption`1[MovieApi.Filters.MovieFilter]) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 00:17:50.939 +01:00 [INF] Movie GetAll called.
2022-01-11 00:17:50.946 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:17:50.955 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Length], [m].[Name], (
    SELECT AVG(CAST([r].[Value] AS float))
    FROM [Rating] AS [r]
    WHERE [m].[Id] = [r].[MovieId]) AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
ORDER BY (
    SELECT AVG(CAST([r0].[Value] AS float))
    FROM [Rating] AS [r0]
    WHERE [m].[Id] = [r0].[MovieId]) DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-01-11 00:17:50.988 +01:00 [ERR] An exception occurred while iterating over the results of a query for context type 'MovieApi.Models.MovieContext'.
System.InvalidOperationException: Nullable object must have a value.
   at lambda_method38(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: Nullable object must have a value.
   at lambda_method38(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2022-01-11 00:17:51.070 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.GetAll (MovieApi) in 134.6534ms
2022-01-11 00:17:51.072 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:17:51.077 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Nullable object must have a value.
   at lambda_method38(Closure , QueryContext , DbDataReader , ResultContext , SingleQueryResultCoordinator )
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at MovieApi.Services.MovieService.GetAll(GenericQueryOption`1 option) in C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi\Services\MovieService.cs:line 64
   at MovieApi.Controllers.MovieController.GetAll(GenericQueryOption`1 option) in C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi\Controllers\MovieController.cs:line 51
   at lambda_method5(Closure , Object )
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-01-11 00:17:51.111 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie - - - 500 - text/plain 182.0127ms
2022-01-11 00:19:51.044 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 00:19:51.075 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 00:19:51.076 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 00:19:51.076 +01:00 [INF] Hosting environment: Development
2022-01-11 00:19:51.076 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 00:19:52.183 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 00:19:52.307 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 125.7275ms
2022-01-11 00:19:52.476 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 00:19:52.568 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 91.5160ms
2022-01-11 00:19:55.367 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie - -
2022-01-11 00:19:55.396 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:19:55.425 +01:00 [INF] Route matched with {action = "GetAll", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.MovieRowVm]] GetAll(MovieApi.Filters.GenericQueryOption`1[MovieApi.Filters.MovieFilter]) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 00:19:55.691 +01:00 [INF] Movie GetAll called.
2022-01-11 00:19:56.249 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:19:56.860 +01:00 [INF] Executed DbCommand (52ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Length], [m].[Name], CASE
    WHEN (
        SELECT COUNT(*)
        FROM [Rating] AS [r]
        WHERE [m].[Id] = [r].[MovieId]) > @__p_0 THEN (
        SELECT AVG(CAST([r0].[Value] AS float))
        FROM [Rating] AS [r0]
        WHERE [m].[Id] = [r0].[MovieId])
    ELSE 0.0E0
END AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
ORDER BY (
    SELECT AVG(CAST([r1].[Value] AS float))
    FROM [Rating] AS [r1]
    WHERE [m].[Id] = [r1].[MovieId]) DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-01-11 00:19:56.902 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.MovieRowVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 00:19:56.920 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.GetAll (MovieApi) in 1487.4024ms
2022-01-11 00:19:56.923 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:19:56.929 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie - - - 200 - application/json;+charset=utf-8 1561.9062ms
2022-01-11 00:20:35.414 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 00:20:35.455 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 00:20:35.455 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 00:20:35.455 +01:00 [INF] Hosting environment: Development
2022-01-11 00:20:35.456 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 00:20:36.473 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 00:20:36.602 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 131.0180ms
2022-01-11 00:20:36.775 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 00:20:36.887 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 112.0558ms
2022-01-11 00:20:46.876 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie - -
2022-01-11 00:20:46.907 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:20:46.937 +01:00 [INF] Route matched with {action = "GetAll", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.MovieRowVm]] GetAll(MovieApi.Filters.GenericQueryOption`1[MovieApi.Filters.MovieFilter]) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 00:20:47.204 +01:00 [INF] Movie GetAll called.
2022-01-11 00:20:47.753 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:20:48.365 +01:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Length], [m].[Name], CASE
    WHEN (
        SELECT COUNT(*)
        FROM [Rating] AS [r]
        WHERE [m].[Id] = [r].[MovieId]) > @__p_0 THEN (
        SELECT AVG(CAST([r0].[Value] AS float))
        FROM [Rating] AS [r0]
        WHERE [m].[Id] = [r0].[MovieId])
    ELSE 0.0E0
END AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
ORDER BY (
    SELECT AVG(CAST([r1].[Value] AS float))
    FROM [Rating] AS [r1]
    WHERE [m].[Id] = [r1].[MovieId]) DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-01-11 00:20:48.403 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.MovieRowVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 00:20:48.419 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.GetAll (MovieApi) in 1472.9831ms
2022-01-11 00:20:48.423 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 00:20:48.428 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie - - - 200 - application/json;+charset=utf-8 1552.1884ms
2022-01-11 00:21:01.391 +01:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Rating application/json 46
2022-01-11 00:21:01.397 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.Post (MovieApi)'
2022-01-11 00:21:01.401 +01:00 [INF] Route matched with {action = "Post", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(MovieApi.Dtos.NewRatingDto) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 00:21:01.418 +01:00 [INF] Rating Post called.
2022-01-11 00:21:01.449 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:21:01.481 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Length], [m].[Name], [m].[Year]
FROM [Movie] AS [m]
WHERE [m].[Id] = @__p_0
2022-01-11 00:21:01.635 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 1000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Rating] ([Description], [MovieId], [Value])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [Rating]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-01-11 00:21:01.674 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MovieApi.ViewModels.RatingVm'.
2022-01-11 00:21:01.707 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.Post (MovieApi) in 302.6486ms
2022-01-11 00:21:01.709 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.Post (MovieApi)'
2022-01-11 00:21:01.710 +01:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Rating application/json 46 - 201 - application/json;+charset=utf-8 318.9766ms
2022-01-11 00:21:07.864 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/movie/8 - -
2022-01-11 00:21:07.866 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 00:21:07.869 +01:00 [INF] Route matched with {action = "GetAllByMovieId", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.RatingVm]] GetAllByMovieId(Int32) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 00:21:07.875 +01:00 [INF] Rating GetAllByMovieId called.
2022-01-11 00:21:07.884 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:21:07.895 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Description], [r].[Id], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2022-01-11 00:21:07.897 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.RatingVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 00:21:07.901 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi) in 28.1395ms
2022-01-11 00:21:07.903 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 00:21:07.905 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/movie/8 - - - 200 - application/json;+charset=utf-8 41.6676ms
2022-01-11 00:21:18.330 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Rating/9 application/json 46
2022-01-11 00:21:18.332 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.Put (MovieApi)'
2022-01-11 00:21:18.336 +01:00 [INF] Route matched with {action = "Put", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, MovieApi.Dtos.UpdateRatingDto) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 00:21:18.341 +01:00 [INF] Rating Put called.
2022-01-11 00:21:18.344 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 00:21:18.359 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 1000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Rating] SET [Description] = @p0, [MovieId] = @p1, [Value] = @p2
WHERE [Id] = @p3;
SELECT @@ROWCOUNT;
2022-01-11 00:21:18.368 +01:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 204
2022-01-11 00:21:18.369 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.Put (MovieApi) in 30.3724ms
2022-01-11 00:21:18.371 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.Put (MovieApi)'
2022-01-11 00:21:18.372 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/Rating/9 application/json 46 - 204 - - 42.2821ms
2022-01-11 22:27:23.671 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 22:27:23.710 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 22:27:23.710 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 22:27:23.711 +01:00 [INF] Hosting environment: Development
2022-01-11 22:27:23.711 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 22:27:24.854 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 22:27:25.008 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 156.0850ms
2022-01-11 22:27:25.198 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 22:27:25.267 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "GET movie/{movieId}" for actions - MovieApi.Controllers.CategoryController.GetAllByMovieId (MovieApi),MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi). Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwagger(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-01-11 22:27:25.335 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 500 - text/plain 136.5437ms
2022-01-11 22:27:58.165 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 22:27:58.227 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 22:27:58.227 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 22:27:58.228 +01:00 [INF] Hosting environment: Development
2022-01-11 22:27:58.228 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 22:27:58.960 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 22:27:59.092 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 134.3609ms
2022-01-11 22:27:59.280 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 22:27:59.340 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "GET movie/{movieId}" for actions - MovieApi.Controllers.CategoryController.GetAllByMovieId (MovieApi),MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi). Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwagger(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-01-11 22:27:59.390 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 500 - text/plain 110.0817ms
2022-01-11 22:28:38.277 +01:00 [INF] Application is shutting down...
2022-01-11 22:29:45.976 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 22:29:46.016 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 22:29:46.016 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 22:29:46.017 +01:00 [INF] Hosting environment: Development
2022-01-11 22:29:46.017 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 22:29:47.147 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 22:29:47.287 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 142.2918ms
2022-01-11 22:29:47.463 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 22:29:47.557 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 94.5605ms
2022-01-11 22:30:49.085 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 22:30:49.119 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 22:30:49.119 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 22:30:49.119 +01:00 [INF] Hosting environment: Development
2022-01-11 22:30:49.119 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 22:30:50.129 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 22:30:50.258 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 131.3970ms
2022-01-11 22:30:50.441 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 22:30:50.536 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 94.9762ms
2022-01-11 22:31:25.187 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 22:31:25.222 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 22:31:25.223 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 22:31:25.223 +01:00 [INF] Hosting environment: Development
2022-01-11 22:31:25.223 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 22:31:26.392 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 22:31:26.523 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 132.6103ms
2022-01-11 22:31:26.710 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 22:31:26.776 +01:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination "GET movie/{movieId}" for actions - MovieApi.Controllers.CategoryController.GetAllByMovieId (MovieApi),MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi). Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwagger(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-01-11 22:31:26.822 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 500 - text/plain 111.8477ms
2022-01-11 22:34:54.530 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 22:34:54.566 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 22:34:54.567 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 22:34:54.567 +01:00 [INF] Hosting environment: Development
2022-01-11 22:34:54.567 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 22:34:55.536 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 22:34:55.679 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 146.0040ms
2022-01-11 22:34:55.870 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 22:34:55.977 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 106.2252ms
2022-01-11 22:35:33.751 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Category - -
2022-01-11 22:35:33.786 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.CategoryController.GetAll (MovieApi)'
2022-01-11 22:35:33.811 +01:00 [INF] Route matched with {action = "GetAll", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.CategoryVm]] GetAll() on controller MovieApi.Controllers.CategoryController (MovieApi).
2022-01-11 22:35:33.819 +01:00 [INF] Executed action MovieApi.Controllers.CategoryController.GetAll (MovieApi) in 1.958ms
2022-01-11 22:35:33.822 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.CategoryController.GetAll (MovieApi)'
2022-01-11 22:35:33.825 +01:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'MovieApi.Services.CategoryService' while attempting to activate 'MovieApi.Controllers.CategoryController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method9(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass4_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass5_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-01-11 22:35:33.878 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Category - - - 500 - text/plain 126.7544ms
2022-01-11 22:36:27.684 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 22:36:27.717 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 22:36:27.718 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 22:36:27.718 +01:00 [INF] Hosting environment: Development
2022-01-11 22:36:27.718 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 22:36:28.845 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 22:36:28.985 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 142.5338ms
2022-01-11 22:36:29.194 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 22:36:29.285 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 90.7796ms
2022-01-11 22:36:35.447 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Category - -
2022-01-11 22:36:35.478 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.CategoryController.GetAll (MovieApi)'
2022-01-11 22:36:35.499 +01:00 [INF] Route matched with {action = "GetAll", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.CategoryVm]] GetAll() on controller MovieApi.Controllers.CategoryController (MovieApi).
2022-01-11 22:36:35.777 +01:00 [INF] Category GetAll called.
2022-01-11 22:36:36.355 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:36:36.909 +01:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Name]
FROM [Category] AS [c]
2022-01-11 22:36:36.946 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.CategoryVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 22:36:36.962 +01:00 [INF] Executed action MovieApi.Controllers.CategoryController.GetAll (MovieApi) in 1456.9875ms
2022-01-11 22:36:36.964 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.CategoryController.GetAll (MovieApi)'
2022-01-11 22:36:36.970 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Category - - - 200 - application/json;+charset=utf-8 1523.1015ms
2022-01-11 22:37:06.703 +01:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Category application/json 18
2022-01-11 22:37:06.709 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.CategoryController.Post (MovieApi)'
2022-01-11 22:37:06.722 +01:00 [INF] Route matched with {action = "Post", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(MovieApi.Dtos.NewCategoryDto) on controller MovieApi.Controllers.CategoryController (MovieApi).
2022-01-11 22:37:06.748 +01:00 [INF] Category Post called.
2022-01-11 22:37:06.785 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:37:06.934 +01:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Category] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Category]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-01-11 22:37:06.979 +01:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2022-01-11 22:37:06.982 +01:00 [INF] Executed action MovieApi.Controllers.CategoryController.Post (MovieApi) in 255.7188ms
2022-01-11 22:37:06.983 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.CategoryController.Post (MovieApi)'
2022-01-11 22:37:06.985 +01:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Category application/json 18 - 200 0 - 281.5492ms
2022-01-11 22:37:11.906 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Category - -
2022-01-11 22:37:11.909 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.CategoryController.GetAll (MovieApi)'
2022-01-11 22:37:11.911 +01:00 [INF] Route matched with {action = "GetAll", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.CategoryVm]] GetAll() on controller MovieApi.Controllers.CategoryController (MovieApi).
2022-01-11 22:37:11.915 +01:00 [INF] Category GetAll called.
2022-01-11 22:37:11.922 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:37:11.931 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Name]
FROM [Category] AS [c]
2022-01-11 22:37:11.933 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.CategoryVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 22:37:11.934 +01:00 [INF] Executed action MovieApi.Controllers.CategoryController.GetAll (MovieApi) in 21.4011ms
2022-01-11 22:37:11.937 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.CategoryController.GetAll (MovieApi)'
2022-01-11 22:37:11.938 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Category - - - 200 - application/json;+charset=utf-8 32.1359ms
2022-01-11 22:37:54.102 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:5001/api/Category/5 - -
2022-01-11 22:37:54.106 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.CategoryController.Delete (MovieApi)'
2022-01-11 22:37:54.111 +01:00 [INF] Route matched with {action = "Delete", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller MovieApi.Controllers.CategoryController (MovieApi).
2022-01-11 22:37:54.114 +01:00 [INF] Category Delete called.
2022-01-11 22:37:54.116 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:37:54.175 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Name]
FROM [Category] AS [c]
WHERE [c].[Id] = @__p_0
2022-01-11 22:37:54.195 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Category]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-01-11 22:37:54.202 +01:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 204
2022-01-11 22:37:54.202 +01:00 [INF] Executed action MovieApi.Controllers.CategoryController.Delete (MovieApi) in 90.0242ms
2022-01-11 22:37:54.204 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.CategoryController.Delete (MovieApi)'
2022-01-11 22:37:54.206 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:5001/api/Category/5 - - - 204 - - 103.0475ms
2022-01-11 22:38:35.314 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 22:38:35.346 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 22:38:35.346 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 22:38:35.347 +01:00 [INF] Hosting environment: Development
2022-01-11 22:38:35.347 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 22:38:36.429 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 22:38:36.561 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 134.7491ms
2022-01-11 22:38:36.745 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 22:38:36.836 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 90.6991ms
2022-01-11 22:38:44.445 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Category - -
2022-01-11 22:38:44.476 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.CategoryController.GetAll (MovieApi)'
2022-01-11 22:38:44.499 +01:00 [INF] Route matched with {action = "GetAll", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.CategoryVm]] GetAll() on controller MovieApi.Controllers.CategoryController (MovieApi).
2022-01-11 22:38:44.762 +01:00 [INF] Category GetAll called.
2022-01-11 22:38:45.334 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:38:45.873 +01:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name]
FROM [Category] AS [c]
2022-01-11 22:38:45.910 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.CategoryVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 22:38:45.926 +01:00 [INF] Executed action MovieApi.Controllers.CategoryController.GetAll (MovieApi) in 1421.8331ms
2022-01-11 22:38:45.929 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.CategoryController.GetAll (MovieApi)'
2022-01-11 22:38:45.935 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Category - - - 200 - application/json;+charset=utf-8 1489.4488ms
2022-01-11 22:39:01.456 +01:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Category application/json 18
2022-01-11 22:39:01.460 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.CategoryController.Post (MovieApi)'
2022-01-11 22:39:01.471 +01:00 [INF] Route matched with {action = "Post", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(MovieApi.Dtos.NewCategoryDto) on controller MovieApi.Controllers.CategoryController (MovieApi).
2022-01-11 22:39:01.491 +01:00 [INF] Category Post called.
2022-01-11 22:39:01.524 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:39:01.662 +01:00 [INF] Executed DbCommand (17ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Category] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Category]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-01-11 22:39:01.711 +01:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2022-01-11 22:39:01.712 +01:00 [INF] Executed action MovieApi.Controllers.CategoryController.Post (MovieApi) in 239.9304ms
2022-01-11 22:39:01.715 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.CategoryController.Post (MovieApi)'
2022-01-11 22:39:01.716 +01:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Category application/json 18 - 200 0 - 260.6365ms
2022-01-11 22:39:29.067 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 22:39:29.110 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 22:39:29.111 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 22:39:29.111 +01:00 [INF] Hosting environment: Development
2022-01-11 22:39:29.111 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 22:39:30.113 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 22:39:30.247 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 136.2610ms
2022-01-11 22:39:30.429 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 22:39:30.519 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 90.8719ms
2022-01-11 22:39:42.112 +01:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Category application/json 18
2022-01-11 22:39:42.142 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.CategoryController.Post (MovieApi)'
2022-01-11 22:39:42.171 +01:00 [INF] Route matched with {action = "Post", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(MovieApi.Dtos.NewCategoryDto) on controller MovieApi.Controllers.CategoryController (MovieApi).
2022-01-11 22:39:42.431 +01:00 [INF] Category Post called.
2022-01-11 22:39:43.028 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:39:43.496 +01:00 [INF] Executed DbCommand (42ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Category] ([Name])
VALUES (@p0);
SELECT [Id]
FROM [Category]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-01-11 22:39:43.559 +01:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2022-01-11 22:39:43.565 +01:00 [INF] Executed action MovieApi.Controllers.CategoryController.Post (MovieApi) in 1388.0096ms
2022-01-11 22:39:43.567 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.CategoryController.Post (MovieApi)'
2022-01-11 22:39:43.573 +01:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Category application/json 18 - 200 0 - 1460.9241ms
2022-01-11 22:39:47.628 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Category - -
2022-01-11 22:39:47.632 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.CategoryController.GetAll (MovieApi)'
2022-01-11 22:39:47.636 +01:00 [INF] Route matched with {action = "GetAll", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.CategoryVm]] GetAll() on controller MovieApi.Controllers.CategoryController (MovieApi).
2022-01-11 22:39:47.641 +01:00 [INF] Category GetAll called.
2022-01-11 22:39:47.667 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:39:47.863 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name]
FROM [Category] AS [c]
2022-01-11 22:39:47.880 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.CategoryVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 22:39:47.891 +01:00 [INF] Executed action MovieApi.Controllers.CategoryController.GetAll (MovieApi) in 251.6852ms
2022-01-11 22:39:47.893 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.CategoryController.GetAll (MovieApi)'
2022-01-11 22:39:47.894 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Category - - - 200 - application/json;+charset=utf-8 266.0059ms
2022-01-11 22:39:56.753 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie - -
2022-01-11 22:39:56.756 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 22:39:56.763 +01:00 [INF] Route matched with {action = "GetAll", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.MovieRowVm]] GetAll(MovieApi.Filters.GenericQueryOption`1[MovieApi.Filters.MovieFilter]) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 22:39:56.773 +01:00 [INF] Movie GetAll called.
2022-01-11 22:39:56.782 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:39:56.903 +01:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Length], [m].[Name], CASE
    WHEN (
        SELECT COUNT(*)
        FROM [Rating] AS [r]
        WHERE [m].[Id] = [r].[MovieId]) > @__p_0 THEN (
        SELECT AVG(CAST([r0].[Value] AS float))
        FROM [Rating] AS [r0]
        WHERE [m].[Id] = [r0].[MovieId])
    ELSE 0.0E0
END AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
ORDER BY (
    SELECT AVG(CAST([r1].[Value] AS float))
    FROM [Rating] AS [r1]
    WHERE [m].[Id] = [r1].[MovieId]) DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-01-11 22:39:56.912 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.MovieRowVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 22:39:56.918 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.GetAll (MovieApi) in 152.4505ms
2022-01-11 22:39:56.922 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 22:39:56.923 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie - - - 200 - application/json;+charset=utf-8 169.5757ms
2022-01-11 22:40:13.937 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Category?movieId=6&categoryId=1 - 0
2022-01-11 22:40:13.939 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.CategoryController.AddMovieToCategory (MovieApi)'
2022-01-11 22:40:13.943 +01:00 [INF] Route matched with {action = "AddMovieToCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Boolean] AddMovieToCategory(Int32, Int32) on controller MovieApi.Controllers.CategoryController (MovieApi).
2022-01-11 22:40:13.949 +01:00 [INF] Category AddMovieToCategory called.
2022-01-11 22:40:13.951 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:40:13.979 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Length], [m].[Name], [m].[Year]
FROM [Movie] AS [m]
WHERE [m].[Id] = @__p_0
2022-01-11 22:40:13.998 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Name]
FROM [Category] AS [c]
WHERE [c].[Id] = @__p_0
2022-01-11 22:55:03.618 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 22:55:03.653 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 22:55:03.653 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 22:55:03.654 +01:00 [INF] Hosting environment: Development
2022-01-11 22:55:03.654 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 22:55:04.568 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 22:55:04.703 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 137.5878ms
2022-01-11 22:55:04.883 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 22:55:04.970 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 87.4704ms
2022-01-11 22:55:11.724 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Category - -
2022-01-11 22:55:11.755 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.CategoryController.GetAll (MovieApi)'
2022-01-11 22:55:11.777 +01:00 [INF] Route matched with {action = "GetAll", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.CategoryVm]] GetAll() on controller MovieApi.Controllers.CategoryController (MovieApi).
2022-01-11 22:55:12.038 +01:00 [INF] Category GetAll called.
2022-01-11 22:55:12.627 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:55:13.175 +01:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name]
FROM [Category] AS [c]
2022-01-11 22:55:13.209 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.CategoryVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 22:55:13.224 +01:00 [INF] Executed action MovieApi.Controllers.CategoryController.GetAll (MovieApi) in 1441.3359ms
2022-01-11 22:55:13.227 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.CategoryController.GetAll (MovieApi)'
2022-01-11 22:55:13.232 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Category - - - 200 - application/json;+charset=utf-8 1507.6623ms
2022-01-11 22:55:20.704 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie - -
2022-01-11 22:55:20.708 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 22:55:20.723 +01:00 [INF] Route matched with {action = "GetAll", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.MovieRowVm]] GetAll(MovieApi.Filters.GenericQueryOption`1[MovieApi.Filters.MovieFilter]) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 22:55:20.739 +01:00 [INF] Movie GetAll called.
2022-01-11 22:55:20.765 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:55:20.880 +01:00 [INF] Executed DbCommand (22ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Length], [m].[Name], CASE
    WHEN (
        SELECT COUNT(*)
        FROM [Rating] AS [r]
        WHERE [m].[Id] = [r].[MovieId]) > @__p_0 THEN (
        SELECT AVG(CAST([r0].[Value] AS float))
        FROM [Rating] AS [r0]
        WHERE [m].[Id] = [r0].[MovieId])
    ELSE 0.0E0
END AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
ORDER BY (
    SELECT AVG(CAST([r1].[Value] AS float))
    FROM [Rating] AS [r1]
    WHERE [m].[Id] = [r1].[MovieId]) DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-01-11 22:55:20.887 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.MovieRowVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 22:55:20.893 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.GetAll (MovieApi) in 167.4292ms
2022-01-11 22:55:20.896 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 22:55:20.897 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie - - - 200 - application/json;+charset=utf-8 193.3109ms
2022-01-11 22:56:37.877 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Movie/6 application/json 236
2022-01-11 22:56:37.881 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.Put (MovieApi)'
2022-01-11 22:56:37.885 +01:00 [INF] Route matched with {action = "Put", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, MovieApi.Dtos.UpdateMovieDto) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 22:56:37.902 +01:00 [INF] Movie Put called.
2022-01-11 22:56:37.923 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:56:38.033 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 250), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Movie] SET [Description] = @p0, [Length] = @p1, [Name] = @p2, [Year] = @p3
WHERE [Id] = @p4;
SELECT @@ROWCOUNT;
2022-01-11 22:56:38.060 +01:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 204
2022-01-11 22:56:38.061 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.Put (MovieApi) in 173.5392ms
2022-01-11 22:56:38.062 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.Put (MovieApi)'
2022-01-11 22:56:38.064 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/Movie/6 application/json 236 - 204 - - 187.1383ms
2022-01-11 22:56:42.577 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie - -
2022-01-11 22:56:42.579 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 22:56:42.581 +01:00 [INF] Route matched with {action = "GetAll", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.MovieRowVm]] GetAll(MovieApi.Filters.GenericQueryOption`1[MovieApi.Filters.MovieFilter]) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 22:56:42.585 +01:00 [INF] Movie GetAll called.
2022-01-11 22:56:42.586 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:56:42.599 +01:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Length], [m].[Name], CASE
    WHEN (
        SELECT COUNT(*)
        FROM [Rating] AS [r]
        WHERE [m].[Id] = [r].[MovieId]) > @__p_0 THEN (
        SELECT AVG(CAST([r0].[Value] AS float))
        FROM [Rating] AS [r0]
        WHERE [m].[Id] = [r0].[MovieId])
    ELSE 0.0E0
END AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
ORDER BY (
    SELECT AVG(CAST([r1].[Value] AS float))
    FROM [Rating] AS [r1]
    WHERE [m].[Id] = [r1].[MovieId]) DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-01-11 22:56:42.604 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.MovieRowVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 22:56:42.609 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.GetAll (MovieApi) in 25.5689ms
2022-01-11 22:56:42.610 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 22:56:42.611 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie - - - 200 - application/json;+charset=utf-8 34.4815ms
2022-01-11 22:56:51.545 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie/6 - -
2022-01-11 22:56:51.548 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.Get (MovieApi)'
2022-01-11 22:56:51.551 +01:00 [INF] Route matched with {action = "Get", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 22:56:51.554 +01:00 [INF] Movie Get called.
2022-01-11 22:56:51.556 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:56:51.577 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Description], [m].[Id], [m].[Length], [m].[Name], CASE
    WHEN (
        SELECT COUNT(*)
        FROM [Rating] AS [r]
        WHERE [m].[Id] = [r].[MovieId]) > 0 THEN (
        SELECT AVG(CAST([r0].[Value] AS float))
        FROM [Rating] AS [r0]
        WHERE [m].[Id] = [r0].[MovieId])
    ELSE 0.0E0
END AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
WHERE [m].[Id] = @__id_0
2022-01-11 22:56:51.584 +01:00 [INF] Executing OkObjectResult, writing value of type 'MovieApi.ViewModels.MovieVm'.
2022-01-11 22:56:51.587 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.Get (MovieApi) in 33.6436ms
2022-01-11 22:56:51.590 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.Get (MovieApi)'
2022-01-11 22:56:51.591 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie/6 - - - 200 - application/json;+charset=utf-8 45.7964ms
2022-01-11 22:57:08.436 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Category?movieId=6&categoryId=1 - 0
2022-01-11 22:57:08.438 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.CategoryController.AddMovieToCategory (MovieApi)'
2022-01-11 22:57:08.442 +01:00 [INF] Route matched with {action = "AddMovieToCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Boolean] AddMovieToCategory(Int32, Int32) on controller MovieApi.Controllers.CategoryController (MovieApi).
2022-01-11 22:57:08.446 +01:00 [INF] Category AddMovieToCategory called.
2022-01-11 22:57:08.449 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:57:08.475 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Length], [m].[Name], [m].[Year]
FROM [Movie] AS [m]
WHERE [m].[Id] = @__p_0
2022-01-11 22:57:08.485 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Name]
FROM [Category] AS [c]
WHERE [c].[Id] = @__p_0
2022-01-11 22:57:08.520 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [CategoryMovie] ([CategoryId], [MovieId])
VALUES (@p0, @p1);
2022-01-11 22:57:08.524 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Boolean'.
2022-01-11 22:57:08.525 +01:00 [INF] Executed action MovieApi.Controllers.CategoryController.AddMovieToCategory (MovieApi) in 81.4251ms
2022-01-11 22:57:08.527 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.CategoryController.AddMovieToCategory (MovieApi)'
2022-01-11 22:57:08.530 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/Category?movieId=6&categoryId=1 - 0 - 200 - application/json;+charset=utf-8 93.3689ms
2022-01-11 22:57:19.825 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Category/movie/6 - -
2022-01-11 22:57:19.828 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.CategoryController.GetAllByMovieId (MovieApi)'
2022-01-11 22:57:19.833 +01:00 [INF] Route matched with {action = "GetAllByMovieId", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[MovieApi.ViewModels.CategoryVm]] GetAllByMovieId(Int32) on controller MovieApi.Controllers.CategoryController (MovieApi).
2022-01-11 22:57:19.837 +01:00 [INF] Category GetAllByMovieId called.
2022-01-11 22:57:19.838 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:57:19.848 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name]
FROM [Category] AS [c]
WHERE EXISTS (
    SELECT 1
    FROM [CategoryMovie] AS [c0]
    WHERE ([c].[Id] = [c0].[CategoryId]) AND ([c0].[MovieId] = @__movieId_0))
2022-01-11 22:57:19.851 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.CategoryVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 22:57:19.853 +01:00 [INF] Executed action MovieApi.Controllers.CategoryController.GetAllByMovieId (MovieApi) in 17.079ms
2022-01-11 22:57:19.854 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.CategoryController.GetAllByMovieId (MovieApi)'
2022-01-11 22:57:19.856 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Category/movie/6 - - - 200 - application/json;+charset=utf-8 31.2331ms
2022-01-11 22:57:24.324 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Category/movie/1 - -
2022-01-11 22:57:24.328 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.CategoryController.GetAllByMovieId (MovieApi)'
2022-01-11 22:57:24.330 +01:00 [INF] Route matched with {action = "GetAllByMovieId", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[MovieApi.ViewModels.CategoryVm]] GetAllByMovieId(Int32) on controller MovieApi.Controllers.CategoryController (MovieApi).
2022-01-11 22:57:24.335 +01:00 [INF] Category GetAllByMovieId called.
2022-01-11 22:57:24.337 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:57:24.340 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name]
FROM [Category] AS [c]
WHERE EXISTS (
    SELECT 1
    FROM [CategoryMovie] AS [c0]
    WHERE ([c].[Id] = [c0].[CategoryId]) AND ([c0].[MovieId] = @__movieId_0))
2022-01-11 22:57:24.346 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.CategoryVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 22:57:24.351 +01:00 [INF] Executed action MovieApi.Controllers.CategoryController.GetAllByMovieId (MovieApi) in 16.6813ms
2022-01-11 22:57:24.353 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.CategoryController.GetAllByMovieId (MovieApi)'
2022-01-11 22:57:24.354 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Category/movie/1 - - - 200 - application/json;+charset=utf-8 30.4784ms
2022-01-11 22:57:43.213 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:5001/api/Movie/8 - -
2022-01-11 22:57:43.216 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.Delete (MovieApi)'
2022-01-11 22:57:43.219 +01:00 [INF] Route matched with {action = "Delete", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 22:57:43.222 +01:00 [INF] Movie Delete called.
2022-01-11 22:57:43.224 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:57:43.227 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Length], [m].[Name], [m].[Year]
FROM [Movie] AS [m]
WHERE [m].[Id] = @__p_0
2022-01-11 22:57:43.240 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Movie]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-01-11 22:57:43.246 +01:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 204
2022-01-11 22:57:43.247 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.Delete (MovieApi) in 25.6798ms
2022-01-11 22:57:43.249 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.Delete (MovieApi)'
2022-01-11 22:57:43.250 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:5001/api/Movie/8 - - - 204 - - 37.1689ms
2022-01-11 22:57:46.673 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie - -
2022-01-11 22:57:46.676 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 22:57:46.676 +01:00 [INF] Route matched with {action = "GetAll", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.MovieRowVm]] GetAll(MovieApi.Filters.GenericQueryOption`1[MovieApi.Filters.MovieFilter]) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 22:57:46.680 +01:00 [INF] Movie GetAll called.
2022-01-11 22:57:46.681 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:57:46.692 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Length], [m].[Name], CASE
    WHEN (
        SELECT COUNT(*)
        FROM [Rating] AS [r]
        WHERE [m].[Id] = [r].[MovieId]) > @__p_0 THEN (
        SELECT AVG(CAST([r0].[Value] AS float))
        FROM [Rating] AS [r0]
        WHERE [m].[Id] = [r0].[MovieId])
    ELSE 0.0E0
END AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
ORDER BY (
    SELECT AVG(CAST([r1].[Value] AS float))
    FROM [Rating] AS [r1]
    WHERE [m].[Id] = [r1].[MovieId]) DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-01-11 22:57:46.697 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.MovieRowVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 22:57:46.699 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.GetAll (MovieApi) in 19.1215ms
2022-01-11 22:57:46.700 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 22:57:46.702 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie - - - 200 - application/json;+charset=utf-8 28.2691ms
2022-01-11 22:57:55.944 +01:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Movie application/json 65
2022-01-11 22:57:55.947 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.Post (MovieApi)'
2022-01-11 22:57:55.950 +01:00 [INF] Route matched with {action = "Post", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(MovieApi.Dtos.NewMovieDto) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 22:57:55.956 +01:00 [INF] Movie Post called.
2022-01-11 22:57:55.960 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:57:55.976 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 250), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Movie] ([Description], [Length], [Name], [Year])
VALUES (@p0, @p1, @p2, @p3);
SELECT [Id]
FROM [Movie]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-01-11 22:57:56.000 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MovieApi.ViewModels.MovieVm'.
2022-01-11 22:57:56.032 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.Post (MovieApi) in 80.1618ms
2022-01-11 22:57:56.034 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.Post (MovieApi)'
2022-01-11 22:57:56.036 +01:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Movie application/json 65 - 201 - application/json;+charset=utf-8 91.9185ms
2022-01-11 22:58:02.921 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie - -
2022-01-11 22:58:02.923 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 22:58:02.924 +01:00 [INF] Route matched with {action = "GetAll", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.MovieRowVm]] GetAll(MovieApi.Filters.GenericQueryOption`1[MovieApi.Filters.MovieFilter]) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 22:58:02.927 +01:00 [INF] Movie GetAll called.
2022-01-11 22:58:02.929 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:58:02.937 +01:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Length], [m].[Name], CASE
    WHEN (
        SELECT COUNT(*)
        FROM [Rating] AS [r]
        WHERE [m].[Id] = [r].[MovieId]) > @__p_0 THEN (
        SELECT AVG(CAST([r0].[Value] AS float))
        FROM [Rating] AS [r0]
        WHERE [m].[Id] = [r0].[MovieId])
    ELSE 0.0E0
END AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
ORDER BY (
    SELECT AVG(CAST([r1].[Value] AS float))
    FROM [Rating] AS [r1]
    WHERE [m].[Id] = [r1].[MovieId]) DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-01-11 22:58:02.942 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.MovieRowVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 22:58:02.943 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.GetAll (MovieApi) in 16.5121ms
2022-01-11 22:58:02.948 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 22:58:02.949 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie - - - 200 - application/json;+charset=utf-8 28.3859ms
2022-01-11 22:58:30.588 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Rating/movie/1 - -
2022-01-11 22:58:30.590 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 22:58:30.594 +01:00 [INF] Route matched with {action = "GetAllByMovieId", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.RatingVm]] GetAllByMovieId(Int32) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 22:58:30.598 +01:00 [INF] Rating GetAllByMovieId called.
2022-01-11 22:58:30.600 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:58:30.607 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Description], [r].[Id], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2022-01-11 22:58:30.612 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.RatingVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 22:58:30.616 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi) in 19.7091ms
2022-01-11 22:58:30.618 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 22:58:30.619 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Rating/movie/1 - - - 200 - application/json;+charset=utf-8 31.1194ms
2022-01-11 22:58:34.567 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Rating/movie/9 - -
2022-01-11 22:58:34.569 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 22:58:34.571 +01:00 [INF] Route matched with {action = "GetAllByMovieId", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.RatingVm]] GetAllByMovieId(Int32) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 22:58:34.575 +01:00 [INF] Rating GetAllByMovieId called.
2022-01-11 22:58:34.576 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:58:34.582 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Description], [r].[Id], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2022-01-11 22:58:34.584 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.RatingVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 22:58:34.586 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi) in 11.5639ms
2022-01-11 22:58:34.588 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 22:58:34.591 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Rating/movie/9 - - - 200 - application/json;+charset=utf-8 24.3044ms
2022-01-11 22:58:37.371 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Rating/movie/8 - -
2022-01-11 22:58:37.375 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 22:58:37.376 +01:00 [INF] Route matched with {action = "GetAllByMovieId", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.RatingVm]] GetAllByMovieId(Int32) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 22:58:37.380 +01:00 [INF] Rating GetAllByMovieId called.
2022-01-11 22:58:37.381 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 22:58:37.385 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Description], [r].[Id], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2022-01-11 22:58:37.390 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.RatingVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 22:58:37.391 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi) in 11.9714ms
2022-01-11 22:58:37.394 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 22:58:37.395 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Rating/movie/8 - - - 200 - application/json;+charset=utf-8 24.4346ms
2022-01-11 23:11:19.247 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 23:11:19.284 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 23:11:19.284 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 23:11:19.284 +01:00 [INF] Hosting environment: Development
2022-01-11 23:11:19.284 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 23:11:20.469 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 23:11:20.601 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 135.0473ms
2022-01-11 23:11:20.777 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 23:11:20.867 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 89.6944ms
2022-01-11 23:11:25.848 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie - -
2022-01-11 23:11:25.876 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 23:11:25.906 +01:00 [INF] Route matched with {action = "GetAll", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.MovieRowVm]] GetAll(MovieApi.Filters.GenericQueryOption`1[MovieApi.Filters.MovieFilter]) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 23:11:26.176 +01:00 [INF] Movie GetAll called.
2022-01-11 23:11:26.784 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 23:11:27.403 +01:00 [INF] Executed DbCommand (49ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Length], [m].[Name], CASE
    WHEN (
        SELECT COUNT(*)
        FROM [Rating] AS [r]
        WHERE [m].[Id] = [r].[MovieId]) > @__p_0 THEN (
        SELECT AVG(CAST([r0].[Value] AS float))
        FROM [Rating] AS [r0]
        WHERE [m].[Id] = [r0].[MovieId])
    ELSE 0.0E0
END AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
ORDER BY (
    SELECT AVG(CAST([r1].[Value] AS float))
    FROM [Rating] AS [r1]
    WHERE [m].[Id] = [r1].[MovieId]) DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-01-11 23:11:27.440 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.MovieRowVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 23:11:27.457 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.GetAll (MovieApi) in 1543.1482ms
2022-01-11 23:11:27.459 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 23:11:27.465 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie - - - 200 - application/json;+charset=utf-8 1616.8897ms
2022-01-11 23:11:40.106 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Rating/movie/1 - -
2022-01-11 23:11:40.111 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 23:11:40.117 +01:00 [INF] Route matched with {action = "GetAllByMovieId", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllByMovieId(Int32) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 23:11:40.122 +01:00 [INF] Rating GetAllByMovieId called.
2022-01-11 23:11:40.144 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 23:11:40.154 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Description], [r].[Id], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2022-01-11 23:11:40.159 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.RatingVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 23:11:40.164 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi) in 44.9549ms
2022-01-11 23:11:40.165 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 23:11:40.167 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Rating/movie/1 - - - 200 - application/json;+charset=utf-8 60.6069ms
2022-01-11 23:11:44.067 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Rating/movie/5 - -
2022-01-11 23:11:44.070 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 23:11:44.070 +01:00 [INF] Route matched with {action = "GetAllByMovieId", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllByMovieId(Int32) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 23:11:44.074 +01:00 [INF] Rating GetAllByMovieId called.
2022-01-11 23:11:44.082 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 23:11:44.087 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Description], [r].[Id], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2022-01-11 23:11:44.090 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.RatingVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 23:11:44.094 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi) in 21.987ms
2022-01-11 23:11:44.098 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 23:11:44.099 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Rating/movie/5 - - - 200 - application/json;+charset=utf-8 31.7029ms
2022-01-11 23:15:07.573 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 23:15:07.607 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 23:15:07.607 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 23:15:07.607 +01:00 [INF] Hosting environment: Development
2022-01-11 23:15:07.607 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 23:15:08.611 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 23:15:08.749 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 140.5469ms
2022-01-11 23:15:08.917 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 23:15:09.007 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 89.7053ms
2022-01-11 23:15:32.321 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie - -
2022-01-11 23:15:32.353 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 23:15:32.385 +01:00 [INF] Route matched with {action = "GetAll", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.MovieRowVm]] GetAll(MovieApi.Filters.GenericQueryOption`1[MovieApi.Filters.MovieFilter]) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 23:15:32.644 +01:00 [INF] Movie GetAll called.
2022-01-11 23:15:33.217 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 23:15:33.831 +01:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Length], [m].[Name], CASE
    WHEN (
        SELECT COUNT(*)
        FROM [Rating] AS [r]
        WHERE [m].[Id] = [r].[MovieId]) > @__p_0 THEN (
        SELECT AVG(CAST([r0].[Value] AS float))
        FROM [Rating] AS [r0]
        WHERE [m].[Id] = [r0].[MovieId])
    ELSE 0.0E0
END AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
ORDER BY (
    SELECT AVG(CAST([r1].[Value] AS float))
    FROM [Rating] AS [r1]
    WHERE [m].[Id] = [r1].[MovieId]) DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-01-11 23:15:33.867 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.MovieRowVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 23:15:33.882 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.GetAll (MovieApi) in 1488.9598ms
2022-01-11 23:15:33.884 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 23:15:33.890 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie - - - 200 - application/json;+charset=utf-8 1568.7095ms
2022-01-11 23:15:48.103 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Rating/movie/2 - -
2022-01-11 23:15:48.108 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 23:15:48.112 +01:00 [INF] Route matched with {action = "GetAllByMovieId", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllByMovieId(Int32) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 23:15:48.116 +01:00 [INF] Rating GetAllByMovieId called.
2022-01-11 23:15:48.139 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 23:15:48.149 +01:00 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2022-01-11 23:15:48.171 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
2022-01-11 23:15:48.204 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Description], [r].[Id], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2022-01-11 23:15:48.209 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.RatingVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 23:15:48.212 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi) in 98.4256ms
2022-01-11 23:15:48.214 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 23:15:48.218 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Rating/movie/2 - - - 200 - application/json;+charset=utf-8 114.5141ms
2022-01-11 23:15:52.083 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Rating/movie/5 - -
2022-01-11 23:15:52.086 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 23:15:52.087 +01:00 [INF] Route matched with {action = "GetAllByMovieId", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllByMovieId(Int32) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 23:15:52.091 +01:00 [INF] Rating GetAllByMovieId called.
2022-01-11 23:15:52.098 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 23:15:52.102 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Description], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
2022-01-11 23:15:52.109 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Description], [r].[Id], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2022-01-11 23:15:52.111 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.RatingVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 23:15:52.114 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi) in 25.1598ms
2022-01-11 23:15:52.116 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 23:15:52.118 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Rating/movie/5 - - - 200 - application/json;+charset=utf-8 34.7119ms
2022-01-11 23:20:15.331 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 23:20:15.368 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 23:20:15.368 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 23:20:15.369 +01:00 [INF] Hosting environment: Development
2022-01-11 23:20:15.369 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 23:20:16.417 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 23:20:16.546 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 131.3654ms
2022-01-11 23:20:16.735 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 23:20:16.826 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 90.6511ms
2022-01-11 23:20:19.960 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Movie - -
2022-01-11 23:20:19.992 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 23:20:20.025 +01:00 [INF] Route matched with {action = "GetAll", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.IEnumerable`1[MovieApi.ViewModels.MovieRowVm]] GetAll(MovieApi.Filters.GenericQueryOption`1[MovieApi.Filters.MovieFilter]) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 23:20:20.307 +01:00 [INF] Movie GetAll called.
2022-01-11 23:20:20.959 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 23:20:21.615 +01:00 [INF] Executed DbCommand (45ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Length], [m].[Name], CASE
    WHEN (
        SELECT COUNT(*)
        FROM [Rating] AS [r]
        WHERE [m].[Id] = [r].[MovieId]) > @__p_0 THEN (
        SELECT AVG(CAST([r0].[Value] AS float))
        FROM [Rating] AS [r0]
        WHERE [m].[Id] = [r0].[MovieId])
    ELSE 0.0E0
END AS [RatingAvg], [m].[Year]
FROM [Movie] AS [m]
ORDER BY (
    SELECT AVG(CAST([r1].[Value] AS float))
    FROM [Rating] AS [r1]
    WHERE [m].[Id] = [r1].[MovieId]) DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2022-01-11 23:20:21.655 +01:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.MovieRowVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 23:20:21.673 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.GetAll (MovieApi) in 1639.6704ms
2022-01-11 23:20:21.674 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.GetAll (MovieApi)'
2022-01-11 23:20:21.680 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Movie - - - 200 - application/json;+charset=utf-8 1720.0743ms
2022-01-11 23:20:35.469 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Rating/movie/2 - -
2022-01-11 23:20:35.473 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 23:20:35.477 +01:00 [INF] Route matched with {action = "GetAllByMovieId", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllByMovieId(Int32) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 23:20:35.482 +01:00 [INF] Rating GetAllByMovieId called.
2022-01-11 23:20:35.505 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 23:20:35.536 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Description], [m].[Length], [m].[Name], [m].[Year]
FROM [Movie] AS [m]
WHERE [m].[Id] = @__movieId_0
2022-01-11 23:20:35.577 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Description], [r].[Id], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2022-01-11 23:20:35.583 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.RatingVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 23:20:35.587 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi) in 108.8254ms
2022-01-11 23:20:35.589 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 23:20:35.591 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Rating/movie/2 - - - 200 - application/json;+charset=utf-8 121.7061ms
2022-01-11 23:20:37.944 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Rating/movie/5 - -
2022-01-11 23:20:37.948 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 23:20:37.952 +01:00 [INF] Route matched with {action = "GetAllByMovieId", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllByMovieId(Int32) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 23:20:37.958 +01:00 [INF] Rating GetAllByMovieId called.
2022-01-11 23:20:37.966 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 23:20:37.974 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Description], [m].[Length], [m].[Name], [m].[Year]
FROM [Movie] AS [m]
WHERE [m].[Id] = @__movieId_0
2022-01-11 23:20:37.978 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-01-11 23:20:37.989 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi) in 32.648ms
2022-01-11 23:20:37.991 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 23:20:37.992 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Rating/movie/5 - - - 404 - application/problem+json;+charset=utf-8 48.1873ms
2022-01-11 23:21:49.821 +01:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Rating application/json 47
2022-01-11 23:21:49.823 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.Post (MovieApi)'
2022-01-11 23:21:49.827 +01:00 [INF] Route matched with {action = "Post", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Post(MovieApi.Dtos.NewRatingDto) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 23:21:49.840 +01:00 [INF] Rating Post called.
2022-01-11 23:21:49.851 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 23:21:49.862 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Length], [m].[Name], [m].[Year]
FROM [Movie] AS [m]
WHERE [m].[Id] = @__p_0
2022-01-11 23:21:49.979 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 1000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Rating] ([Description], [MovieId], [Value])
VALUES (@p0, @p1, @p2);
SELECT [Id]
FROM [Rating]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-01-11 23:21:50.021 +01:00 [INF] Executing CreatedAtActionResult, writing value of type 'MovieApi.ViewModels.RatingVm'.
2022-01-11 23:21:50.054 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.Post (MovieApi) in 225.3816ms
2022-01-11 23:21:50.056 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.Post (MovieApi)'
2022-01-11 23:21:50.057 +01:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Rating application/json 47 - 201 - application/json;+charset=utf-8 237.0229ms
2022-01-11 23:22:00.349 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Rating/movie/9 - -
2022-01-11 23:22:00.351 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 23:22:00.352 +01:00 [INF] Route matched with {action = "GetAllByMovieId", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllByMovieId(Int32) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 23:22:00.354 +01:00 [INF] Rating GetAllByMovieId called.
2022-01-11 23:22:00.355 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 23:22:00.361 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Description], [m].[Length], [m].[Name], [m].[Year]
FROM [Movie] AS [m]
WHERE [m].[Id] = @__movieId_0
2022-01-11 23:22:00.368 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Description], [r].[Id], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2022-01-11 23:22:00.370 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.RatingVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 23:22:00.373 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi) in 19.1493ms
2022-01-11 23:22:00.375 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 23:22:00.376 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Rating/movie/9 - - - 200 - application/json;+charset=utf-8 27.6580ms
2022-01-11 23:22:25.158 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Rating/10 application/json 58
2022-01-11 23:22:25.161 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.Put (MovieApi)'
2022-01-11 23:22:25.165 +01:00 [INF] Route matched with {action = "Put", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, MovieApi.Dtos.UpdateRatingDto) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 23:22:25.172 +01:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2022-01-11 23:22:25.177 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.Put (MovieApi) in 9.583ms
2022-01-11 23:22:25.179 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.Put (MovieApi)'
2022-01-11 23:22:25.181 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/Rating/10 application/json 58 - 400 - application/problem+json;+charset=utf-8 22.5424ms
2022-01-11 23:22:43.679 +01:00 [INF] Request starting HTTP/2 PUT https://localhost:5001/api/Rating/10 application/json 46
2022-01-11 23:22:43.682 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.Put (MovieApi)'
2022-01-11 23:22:43.685 +01:00 [INF] Route matched with {action = "Put", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Put(Int32, MovieApi.Dtos.UpdateRatingDto) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 23:22:43.690 +01:00 [INF] Rating Put called.
2022-01-11 23:22:43.694 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 23:22:43.707 +01:00 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (Size = 1000), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Rating] SET [Description] = @p0, [MovieId] = @p1, [Value] = @p2
WHERE [Id] = @p3;
SELECT @@ROWCOUNT;
2022-01-11 23:22:43.716 +01:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 204
2022-01-11 23:22:43.717 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.Put (MovieApi) in 30.141ms
2022-01-11 23:22:43.718 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.Put (MovieApi)'
2022-01-11 23:22:43.719 +01:00 [INF] Request finished HTTP/2 PUT https://localhost:5001/api/Rating/10 application/json 46 - 204 - - 40.1896ms
2022-01-11 23:23:09.842 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Rating/10 - -
2022-01-11 23:23:09.845 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.Get (MovieApi)'
2022-01-11 23:23:09.848 +01:00 [INF] Route matched with {action = "Get", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 23:23:09.852 +01:00 [INF] Rating Get called.
2022-01-11 23:23:09.854 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 23:23:09.865 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Description], [r].[Id], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
WHERE [r].[Id] = @__id_0
2022-01-11 23:23:09.870 +01:00 [INF] Executing OkObjectResult, writing value of type 'MovieApi.ViewModels.RatingVm'.
2022-01-11 23:23:09.871 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.Get (MovieApi) in 20.8411ms
2022-01-11 23:23:09.874 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.Get (MovieApi)'
2022-01-11 23:23:09.876 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Rating/10 - - - 200 - application/json;+charset=utf-8 35.0622ms
2022-01-11 23:23:21.070 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Rating/movie/9 - -
2022-01-11 23:23:21.076 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 23:23:21.077 +01:00 [INF] Route matched with {action = "GetAllByMovieId", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllByMovieId(Int32) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 23:23:21.080 +01:00 [INF] Rating GetAllByMovieId called.
2022-01-11 23:23:21.082 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 23:23:21.088 +01:00 [INF] Executed DbCommand (4ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Description], [m].[Length], [m].[Name], [m].[Year]
FROM [Movie] AS [m]
WHERE [m].[Id] = @__movieId_0
2022-01-11 23:23:21.097 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Description], [r].[Id], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
WHERE [r].[MovieId] = @__movieId_0
2022-01-11 23:23:21.102 +01:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[MovieApi.ViewModels.RatingVm, MovieApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-01-11 23:23:21.104 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi) in 23.6981ms
2022-01-11 23:23:21.107 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 23:23:21.108 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Rating/movie/9 - - - 200 - application/json;+charset=utf-8 38.3394ms
2022-01-11 23:23:32.424 +01:00 [INF] Request starting HTTP/2 DELETE https://localhost:5001/api/Movie/9 - -
2022-01-11 23:23:32.427 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.MovieController.Delete (MovieApi)'
2022-01-11 23:23:32.431 +01:00 [INF] Route matched with {action = "Delete", controller = "Movie"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(Int32) on controller MovieApi.Controllers.MovieController (MovieApi).
2022-01-11 23:23:32.434 +01:00 [INF] Movie Delete called.
2022-01-11 23:23:32.435 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 23:23:32.440 +01:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [m].[Id], [m].[Description], [m].[Length], [m].[Name], [m].[Year]
FROM [Movie] AS [m]
WHERE [m].[Id] = @__p_0
2022-01-11 23:23:32.453 +01:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [Movie]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;
2022-01-11 23:23:32.458 +01:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 204
2022-01-11 23:23:32.460 +01:00 [INF] Executed action MovieApi.Controllers.MovieController.Delete (MovieApi) in 27.2711ms
2022-01-11 23:23:32.462 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.MovieController.Delete (MovieApi)'
2022-01-11 23:23:32.463 +01:00 [INF] Request finished HTTP/2 DELETE https://localhost:5001/api/Movie/9 - - - 204 - - 39.2688ms
2022-01-11 23:23:40.773 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Rating/movie/9 - -
2022-01-11 23:23:40.776 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 23:23:40.779 +01:00 [INF] Route matched with {action = "GetAllByMovieId", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllByMovieId(Int32) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 23:23:40.782 +01:00 [INF] Rating GetAllByMovieId called.
2022-01-11 23:23:40.784 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 23:23:40.789 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__movieId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [m].[Id], [m].[Description], [m].[Length], [m].[Name], [m].[Year]
FROM [Movie] AS [m]
WHERE [m].[Id] = @__movieId_0
2022-01-11 23:23:40.800 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-01-11 23:23:40.803 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi) in 20.9111ms
2022-01-11 23:23:40.805 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.GetAllByMovieId (MovieApi)'
2022-01-11 23:23:40.808 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Rating/movie/9 - - - 404 - application/problem+json;+charset=utf-8 35.5382ms
2022-01-11 23:23:44.727 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/api/Rating/10 - -
2022-01-11 23:23:44.732 +01:00 [INF] Executing endpoint 'MovieApi.Controllers.RatingController.Get (MovieApi)'
2022-01-11 23:23:44.733 +01:00 [INF] Route matched with {action = "Get", controller = "Rating"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(Int32) on controller MovieApi.Controllers.RatingController (MovieApi).
2022-01-11 23:23:44.736 +01:00 [INF] Rating Get called.
2022-01-11 23:23:44.737 +01:00 [INF] Entity Framework Core 5.0.1 initialized 'MovieContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2022-01-11 23:23:44.742 +01:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Description], [r].[Id], [r].[MovieId], [r].[Value]
FROM [Rating] AS [r]
WHERE [r].[Id] = @__id_0
2022-01-11 23:23:44.745 +01:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2022-01-11 23:23:44.752 +01:00 [INF] Executed action MovieApi.Controllers.RatingController.Get (MovieApi) in 15.738ms
2022-01-11 23:23:44.754 +01:00 [INF] Executed endpoint 'MovieApi.Controllers.RatingController.Get (MovieApi)'
2022-01-11 23:23:44.755 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/api/Rating/10 - - - 404 - application/problem+json;+charset=utf-8 28.2812ms
2022-01-11 23:40:24.241 +01:00 [INF] Now listening on: https://localhost:5001
2022-01-11 23:40:24.276 +01:00 [INF] Now listening on: http://localhost:5000
2022-01-11 23:40:24.276 +01:00 [INF] Application started. Press Ctrl+C to shut down.
2022-01-11 23:40:24.276 +01:00 [INF] Hosting environment: Development
2022-01-11 23:40:24.277 +01:00 [INF] Content root path: C:\Users\Feczkó Botond\source\repos\MovieApi\MovieApi
2022-01-11 23:40:25.121 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/index.html - -
2022-01-11 23:40:25.262 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/index.html - - - 200 - text/html;charset=utf-8 143.6565ms
2022-01-11 23:40:25.453 +01:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2022-01-11 23:40:25.548 +01:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 94.7182ms
